<ion-header [translucent]="true">
  <ion-toolbar color="party"> </ion-toolbar>
</ion-header>
<ion-content>
  <div id="alto" class="slider">
    <ion-slides class="sliderPrimero setHeight" scrollbar="false" pager="false" [options]="slideOpts">
      <ion-slide *ngFor="let item of sliderPlace" class="sliderHijo">
        <!-- 
        <ion-img class="imgSlider" [src]="item.imagen.url"></ion-img>
        -->
        <app-preload [url]="item.imagen.url" [alt]="item.imagen.name" [urlPreload]="preloadImage"></app-preload>
      </ion-slide>
    </ion-slides>
    <!-- =========>=>=>=> Filtro =========>=>=>=> -->
    <div class="filter_place">
      <ion-label
        *ngIf="!selectdistancia && (optionLocation === null || optionLocation === 'localidad' || optionLocation === '')"
        (click)="changeFilterLocation()" id="filters">localidad</ion-label>
      <ion-label
        *ngIf=" !selectdistancia && (optionLocation !== null && optionLocation !== 'localidad' && optionLocation !== '')"
        class="open_filter" (click)="changeFilterLocation()" id="filters">{{ optionLocation }}</ion-label>
      <img *ngIf="!selectdistancia" src="/assets/icon/exchange.png" alt="" />
      <ion-label *ngIf="optionType === null || optionType === 'tipo' || optionType === ''" (click)="changeFilterType()"
        id="filters">tipo</ion-label>
      <ion-label *ngIf="optionType !== null && optionType !== 'tipo' && optionType !== ''" class="open_filter"
        (click)="changeFilterType()" id="filters">{{ optionType }}</ion-label>
    </div>

    <div>
      <form [formGroup]="filterForm" class="form_filter">
        <!-- Filtro por Localidad  -->
        <div *ngIf="isFilterLocation">
          <div class="filter_name">
            <span id="filters">Localidad</span>
          </div>
          <div>
            <ion-list class="list_type">
              <ion-radio-group (ionChange)="filterPlace()" formControlName="localidad" class="type_border">
                <ion-item class="filter_list" lines="none">
                  <ion-text id="filters">Todo</ion-text>
                  <ion-radio slot="end" value=""></ion-radio>
                </ion-item>
                <ion-item class="filter_list" lines="none" *ngFor="let loc of localidades">
                  <ion-text id="filters">{{ loc }}</ion-text>
                  <ion-radio slot="end" value="{{ loc }}"></ion-radio>
                </ion-item>
              </ion-radio-group>
            </ion-list>
          </div>
        </div>
        <!-- filtro por Localidad -->

        <!-- filtro por Tipo -->
        <div *ngIf="isFilterType">
          <div class="filter_name">
            <span id="filters">Tipo</span>
          </div>
          <div>
            <ion-list class="list_type">
              <ion-radio-group (ionChange)="filterPlace()" formControlName="tipo" class="type_border">
                <ion-item class="filter_list" lines="none">
                  <ion-text id="filters">Todo</ion-text>
                  <ion-radio slot="end" value=""></ion-radio>
                </ion-item>
                <ion-item class="filter_list last" lines="none" *ngFor="let tipo of tipos">
                  <ion-text id="filters">{{ tipo }}</ion-text>
                  <ion-radio slot="end" value="{{ tipo }}"></ion-radio>
                </ion-item>
              </ion-radio-group>
            </ion-list>
          </div>
        </div>
        <!-- Filtro por Tipo -->
      </form>
    </div>
  </div>

  <div class="cards">
    <ion-list>
      <ng-container *ngFor="let item of places | filterPlaces:dataForm">
        <ng-container *ngIf="item.vacio !== 1">
          <ion-card *ngIf="(item.distanciaNumber <= dist || dep != null)" id="{{ item.id }}">
            <ion-card-header color="party" id="place-title" [routerLink]="['/place-selected', item.id]"
              (click)="getPlace(item.id); sumaVisitaLugar(item.id)">
              {{ item.nombre }}<span class="categoria">&nbsp;&nbsp;({{item.tipo}})</span>
            </ion-card-header>
            <ion-card-content>
              <span [routerLink]="['/place-selected', item.id]" (click)="getPlace(item.id); sumaVisitaLugar(item.id)">
                <app-preload class="imgCard" [url]="item.imagenHome['url']" [alt]="item.nombre"
                  [urlPreload]="preloadImage"></app-preload>
                <div class="duracion">
                  <b class="distancia">{{item.distancia | formatDistancia }} </b>
                </div>
              </span>
              <ion-fab horizontal="end" vertical="bottom" edge slot="fixed">
                <ion-fab-button color="tertiary">
                  <ion-img class="accessibility" src="/assets/icon/accessibility.svg"></ion-img>
                </ion-fab-button>
                <ion-fab-list side="start" class="list_access">
                  <ion-fab-button class="fab-button-access" color="light">
                    <ion-img class="accessibility-option" src="/assets/icon/accessible-icon-brands.svg"></ion-img>
                  </ion-fab-button>
                  <ion-fab-button class="fab-button-access" color="light">
                    <ion-img class="accessibility-option" src="/assets/icon/toilet-solid.svg"></ion-img>
                  </ion-fab-button>
                  </ion-fab-list>
              </ion-fab>
            </ion-card-content>

          </ion-card>
        </ng-container>

        <ng-container *ngIf="item.vacio === 1">
          <div class="empty">
            <i class="fi fi-rr-sad icon_empty"></i>
            <div class="text_empty">
              No hay lugares para mostrar con el filtro seleccionado
            </div>
          </div>
        </ng-container>
      </ng-container>
    </ion-list>

    <ion-list *ngIf="places.length === 0">
      <ng-container *ngFor="let item of [1,2,3]">
        <ion-card>
          <ion-card-header>
            <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
          </ion-card-header>
          <ion-card-content>
            <ion-img src="/assets/img/img-skeleton.svg"></ion-img>
            <ion-skeleton-text animated style="width: 30%; margin: 5px 0 5px 10px"></ion-skeleton-text>
          </ion-card-content>
        </ion-card>
      </ng-container>
    </ion-list>
  </div>
</ion-content>